<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Charlie Eydman</title>
    <link rel="icon" type="image/webp" href="static/img/ce-logo.webp">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,400;0,600;0,700;1,400&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="static/css/style.css" />
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7G5E9VLS49"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-7G5E9VLS49');
</script>

<body>
    <main class="columns" aria-label="Three independent columns">
        <!-- Column 1 -->
        <section class="panel is-collapsed" id="projects-1" aria-labelledby="h-projects-1">
            <header class="panel__header">
                <h1 id="h-projects-1" class="panel__title">Jewelry</h1>
            </header>
            <div class="panel__content">
                <article class="card" data-title="2025 | Silver necklace on cherrywood"
                    data-text="2025 | Silver on cherry"
                    data-images="static/img/IMG_2393.jpg, static/img/IMG_2384.jpg, static/img/IMG_2383.jpg, static/img/IMG_2382.jpg">
                    <figure class="media">
                        <img src="static/img/IMG_2393.jpg" alt="Silver necklace" loading="lazy">
                    </figure>
                    <h3 class="card__title">Silver necklace on cherrywood</h3>
                    <p class="card__text">2025 | Silver on cherry</p>
                </article>

                <article class="card" data-title="Spikey Necklace" data-text="2024 | Silver spikey necklace"
                    data-images="static/img/IMG_1432.webp, static/img/IMG_1431.webp, static/img/IMG_1429.webp">
                    <figure class="media">
                        <img src="static/img/IMG_1432.webp" alt="Spikey Necklace" loading="lazy">
                    </figure>
                    <h3 class="card__title">Spikey necklace</h3>
                    <p class="card__text">2024 | Silver spikey necklace</p>
                </article>

                <article class="card" data-title="Tri Ring" data-text="2023 | Sterling Silver"
                    data-images="static/img/DSC_6800.avif, static\img\DSC_6797.avif, static\img\DSC_6810.avif">
                    <figure class="media">
                        <img src="static/img/DSC_6800.avif" alt="Tri Ring" loading="lazy">
                    </figure>
                    <h3 class="card__title">Tri Ring</h3>
                    <p class="card__text">2023 | Sterling Silver</p>
                </article>
                <article class="card" data-title="Red Garnet Ring" data-text="2023 | Sterling Silver with a red garnet"
                    data-images="static/img/DSC_6796.avif, static/img/DSC_6811.avif, static/img/DSC_6825.avif">
                    <figure class="media">
                        <img src="static/img/DSC_6796.avif" alt="Red Garnet Ring" loading="lazy">
                    </figure>
                    <h3 class="card__title">Red Garnet Ring</h3>
                    <p class="card__text">2023 | Sterling Silver with a red garnet</p>
                </article>
                <article class="card" data-title="Wave Ring" data-text="2023 | Sterling Silver"
                    data-images="static/img/DSC_6807.avif, static\img\DSC_6806.avif, static\img\DSC_6827.avif, static\img\DSC_6828.avif ">
                    <figure class="media">
                        <img src="static/img/DSC_6807.avif" alt="Wave Ring" loading="lazy">
                    </figure>
                    <h3 class="card__title">Wave Ring</h3>
                    <p class="card__text">2023 | Sterling Silver</p>
                </article>
                <article class="card" data-title="Rock Ring" data-text="2023 | Sterling Silver"
                    data-images="static/img/DSC_6814.avif, static/img/DSC_6813.avif">
                    <figure class="media">
                        <img src="static/img/DSC_6814.avif" alt="Rock Ring" loading="lazy">
                    </figure>
                    <h3 class="card__title">Rock Ring</h3>
                    <p class="card__text">2023 | Sterling Silver Rings</p>
                </article>
                <article class="card" data-title="Crown Ring" data-text="2023 | Sterling Silver"
                    data-images="static/img/DSC_6801.avif, static/img/DSC_6812.avif">
                    <figure class="media">
                        <img src="static/img/DSC_6801.avif" alt="Crown Ring" loading="lazy">
                    </figure>
                    <h3 class="card__title">Crown Ring</h3>
                    <p class="card__text">2023 | Sterling Silver Rings</p>
                </article>
            </div>
        </section>

        <!-- Column 2 -->
        <section class="panel is-collapsed" id="projects-2" aria-labelledby="h-projects-2">
            <header class="panel__header">
                <h1 id="h-projects-2" class="panel__title">Woodwork</h1>
            </header>
            <div class="panel__content">
                <article class="card" data-title="Wavy Chess Board"
                    data-text="2025 | Wavy chess board | WIP"
                    data-images="static/img/IMG_1488.webp, static/img/IMG_1489.webp, static/img/IMG_1490.webp, static/img/IMG_1652.jpeg">
                    <figure class="media">
                        <img src="static/img/IMG_1488.webp" alt="Wavy chess board" loading="lazy">
                    </figure>
                    <h3 class="card__title">Wavy Chess Board</h3>
                    <p class="card__text">2025 | Wavy Chess Board with hand-carved pieces | WIP</p>
                </article>

                <article class="card" data-title="Puzzle Box" data-text="2020 | Wooden puzzle box with a large compartment"
                    data-images="static/img/DSC_6830.avif, static/img/DSC_6837.avif, static/img/DSC_6842.avif">
                    <figure class="media">
                        <img src="static/img/DSC_6830.avif" alt="Puzzle Box" loading="lazy">
                    </figure>
                    <h3 class="card__title">Puzzle Box</h3>
                    <p class="card__text">2020 | Wooden Puzzle Box</p>
                </article>
            </div>
        </section>

        <!-- Column 3 -->
        <aside class="panel" id="about" aria-labelledby="h-about">
            <div class="panel__content">
                <h3 id="h-about" class="about__title">Charlie Eydman</h3>
                <p>Designer. Builder. Creator.</p>
                
                <p class="bio">Charlie Eydman is a Brooklyn-based maker working across jewelry and wood. Trained through studio practice and a steady
                diet of prototypes, Charlie builds small things that feel substantial and large things that feel precise. Current work
                in sterling silver and domestic hardwoods.</p>
                <nav class="social">
                    <a href="https://www.linkedin.com/in/charlieydman/" target="_blank" rel="noopener">LinkedIn</a>
                    <a href="https://www.instagram.com/charlieydman/" target="_blank" rel="noopener">Instagram</a>
                </nav>
                
            </div>
            <div class="credit">Portfolio built and designed by Charlie Eydman.</div>
        </aside>
    </main>

    <!-- Scripts -->
    <script>
        (function () {
            const container = document.querySelector('.columns');
            const panels = Array.from(document.querySelectorAll('.panel'));
            if (!container || panels.length === 0) return;

            /* ----- column width controller ----- */
            function updateColumns() {
                const desktop = matchMedia('(min-width: 901px)').matches;
                panels.forEach((panel, i) => {
                    const varName = `--c${i + 1}`;
                    if (desktop && panel.classList.contains('is-collapsed')) {
                        container.style.setProperty(varName, 'var(--collapsed-w)');
                    } else {
                        container.style.setProperty(varName, '1fr');
                    }
                });
            }

            /* ----- scrim to block other panels and capture outside clicks ----- */
            let scrim = null;
            function ensureScrim() {
                if (!scrim) {
                    scrim = document.createElement('div');
                    scrim.className = 'focus-scrim';
                    scrim.addEventListener('click', () => {
                        const focused = document.querySelector('.panel.is-focused');
                        if (focused) { teardownDetail(focused); updateColumns(); }
                    });
                    document.body.appendChild(scrim);
                }
                return scrim;
            }
            function showScrim() { ensureScrim(); }
            function hideScrim() { if (scrim) { scrim.remove(); scrim = null; } }

            /* ----- helpers to open/close detail ----- */
            function teardownDetail(panel) {
                const detail = panel.querySelector('.post-detail');
                if (detail) detail.remove();                      // hard remove prevents ghosts
                panel.classList.remove('has-detail', 'is-focused');
                document.body.classList.remove('has-card-focus');
                hideScrim();
            }

            function ensureCleanDetail(panel) {
                // always start fresh to avoid duplicate content
                teardownDetail(panel);
                const detail = document.createElement('div');
                detail.className = 'post-detail';
                detail.innerHTML = `
          <div class="post-detail__bar">
            <h2 class="post-detail__title"></h2>
          </div>
          <p class="post-detail__text"></p>
          <div class="post-detail__stack" aria-label="Post images"></div>
        `;
                panel.appendChild(detail);
                return detail;
            }

            function openDetailFor(card) {
                const panel = card.closest('.panel');
                const detail = ensureCleanDetail(panel);

                const title = card.dataset.title || card.querySelector('.card__title')?.textContent?.trim() || 'Untitled';
                const text = card.dataset.text || card.querySelector('.card__text')?.textContent?.trim() || '';
                detail.querySelector('.post-detail__title').textContent = title;
                detail.querySelector('.post-detail__text').textContent = text;

                // Build a vertical stack of images (lazy-loaded)
                const raw = card.dataset.images || card.querySelector('img')?.src || '';
                const images = raw.split(',').map(s => s.trim()).filter(Boolean);
                const stack = detail.querySelector('.post-detail__stack');
                const useIO = 'IntersectionObserver' in window;

                const loadImg = (imgEl) => {
                    const src = imgEl.dataset.src;
                    if (!src || imgEl.src) return;
                    imgEl.src = src;
                    imgEl.removeAttribute('data-src');
                };

                let io;
                if (useIO) {
                    io = new IntersectionObserver((entries) => {
                        entries.forEach(e => { if (e.isIntersecting) { loadImg(e.target); io.unobserve(e.target); } });
                    }, { root: detail, rootMargin: '200px 0px' });
                }

                images.forEach((src, i) => {
                    const img = document.createElement('img');
                    img.alt = `${title} â€” image ${i + 1}`;
                    img.loading = 'lazy';
                    img.decoding = 'async';
                    img.dataset.src = src;           // defer actual src
                    stack.appendChild(img);
                    if (useIO) io.observe(img); else loadImg(img);
                });

                panel.classList.add('has-detail', 'is-focused');
                document.body.classList.add('has-card-focus');
                showScrim();                       // block interactions with other columns
                updateColumns();

                // close on Esc inside detail
                detail.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        e.preventDefault();
                        teardownDetail(panel);
                        updateColumns();
                        panel.querySelector('.panel__header')?.focus();
                    }
                });
            }

            function closeAnyOpenDetail() {
                const open = document.querySelector('.panel.has-detail');
                if (open) teardownDetail(open);
            }

            /* ----- header toggle: close detail first, then collapse/expand ----- */
            panels.forEach((panel, i) => {
                const header = panel.querySelector('.panel__header');
                const content = panel.querySelector('.panel__content');
                if (!header || !content) return;

                header.setAttribute('role', 'button');
                header.setAttribute('tabindex', '0');
                if (!content.id) content.id = (panel.id || `panel-${i + 1}`) + '-content';
                header.setAttribute('aria-controls', content.id);

                const toggle = (e) => {
                    if (e.type === 'keydown' && e.key !== 'Enter' && e.key !== ' ') return;
                    e.preventDefault();

                    // if detail is open in this panel, close it first
                    if (panel.classList.contains('has-detail')) {
                        teardownDetail(panel);
                        updateColumns();
                        return;
                    }

                    panel.classList.toggle('is-collapsed');
                    header.setAttribute('aria-expanded', String(!panel.classList.contains('is-collapsed')));
                    updateColumns();
                };

                header.addEventListener('click', toggle);
                header.addEventListener('keydown', toggle);
            });

            /* ----- wire cards to open in-column detail ----- */
            document.querySelectorAll('.card').forEach(card => {
                card.setAttribute('tabindex', '0');
                card.addEventListener('click', (e) => {
                    // If another card is open, scrim will handle outside clicks; still guard here
                    if (document.body.classList.contains('has-card-focus')) return;
                    openDetailFor(card);
                });
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        if (document.body.classList.contains('has-card-focus')) return;
                        e.preventDefault(); openDetailFor(card);
                    }
                });
            });

            /* global ESC closes any open detail */
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') { closeAnyOpenDetail(); updateColumns(); }
            });

            /* guard against keyboard-activating other columns while focused */
            document.addEventListener('keydown', (e) => {
                if (!document.body.classList.contains('has-card-focus')) return;
                const focused = document.querySelector('.panel.is-focused');
                if (!focused) return;
                if ((e.key === 'Enter' || e.key === ' ') && !focused.contains(e.target)) {
                    e.preventDefault();
                    teardownDetail(focused); updateColumns();
                }
            }, true);

            updateColumns();
            addEventListener('resize', updateColumns);
        })();
    </script>
</body>

</html>